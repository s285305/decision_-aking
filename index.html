<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Decision-Making Quiz Platform</title>
    <style>
        :root {
            --color-primary: #2180a0;
            --color-primary-hover: #1a6b85;
            --color-success: #32b8c6;
            --color-error: #c0152f;
            --color-background: #fcfcf9;
            --color-surface: #ffffff;
            --color-text: #134252;
            --color-text-secondary: #626c7c;
            --color-border: rgba(94, 82, 64, 0.2);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background-color: var(--color-background);
            color: var(--color-text);
            line-height: 1.5;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px 0;
            border-bottom: 2px solid var(--color-border);
        }

        h1 {
            font-size: 28px;
            margin-bottom: 10px;
            color: var(--color-primary);
        }

        .subtitle {
            color: var(--color-text-secondary);
            font-size: 14px;
        }

        .controls {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }

        button {
            padding: 10px 16px;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background-color: var(--color-primary);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--color-primary-hover);
        }

        .btn-secondary {
            background-color: transparent;
            border: 1px solid var(--color-border);
            color: var(--color-text);
        }

        .btn-secondary:hover {
            background-color: rgba(33, 128, 160, 0.05);
        }

        .filter-section {
            background-color: var(--color-surface);
            border: 1px solid var(--color-border);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .filter-label {
            font-weight: 600;
            margin-bottom: 10px;
            display: block;
            color: var(--color-text);
        }

        .checkbox-group {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .checkbox-item input {
            cursor: pointer;
        }

        .checkbox-item label {
            cursor: pointer;
            font-size: 14px;
        }

        .quiz-container {
            background-color: var(--color-surface);
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
            border: 1px solid var(--color-border);
        }

        .question-number {
            color: var(--color-text-secondary);
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 10px;
        }

        .question-text {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 20px;
            color: var(--color-text);
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .option {
            padding: 12px 16px;
            border: 2px solid var(--color-border);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            background-color: var(--color-surface);
            font-size: 14px;
        }

        .option:hover {
            border-color: var(--color-primary);
            background-color: rgba(33, 128, 160, 0.03);
        }

        .option.selected {
            border-color: var(--color-primary);
            background-color: rgba(33, 128, 160, 0.08);
        }

        .feedback {
            margin-top: 20px;
            padding: 15px;
            border-radius: 6px;
            display: none;
        }

        .feedback.show {
            display: block;
        }

        .feedback.correct {
            background-color: rgba(50, 184, 198, 0.1);
            border-left: 4px solid var(--color-success);
            color: var(--color-success);
        }

        .feedback.incorrect {
            background-color: rgba(192, 21, 47, 0.1);
            border-left: 4px solid var(--color-error);
            color: var(--color-error);
        }

        .explanation {
            margin-top: 10px;
            font-size: 14px;
            line-height: 1.6;
        }

        .btn-group {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            justify-content: space-between;
        }

        .btn-group button {
            flex: 1;
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background-color: var(--color-border);
            border-radius: 3px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background-color: var(--color-primary);
            transition: width 0.3s ease;
        }

        .stats {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .stat-box {
            text-align: center;
        }

        .stat-value {
            font-size: 24px;
            font-weight: 700;
            color: var(--color-primary);
        }

        .stat-label {
            font-size: 12px;
            color: var(--color-text-secondary);
            text-transform: uppercase;
        }

        .redo-section {
            background-color: var(--color-surface);
            border: 2px solid var(--color-border);
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
        }

        .redo-title {
            font-weight: 600;
            color: var(--color-primary);
            margin-bottom: 10px;
        }

        .redo-list {
            list-style: none;
        }

        .redo-item {
            padding: 10px;
            background-color: var(--color-background);
            margin-bottom: 8px;
            border-radius: 4px;
            border-left: 3px solid var(--color-error);
            font-size: 14px;
        }

        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: var(--color-text-secondary);
        }

        .empty-state-icon {
            font-size: 48px;
            margin-bottom: 10px;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.show {
            display: flex;
        }

        .modal-content {
            background-color: var(--color-surface);
            border-radius: 12px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-title {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 15px;
            color: var(--color-primary);
        }

        @media (max-width: 640px) {
            .container {
                padding: 15px;
            }

            h1 {
                font-size: 22px;
            }

            .quiz-container {
                padding: 15px;
            }

            .btn-group {
                flex-direction: column;
            }

            .controls {
                flex-direction: column;
            }

            button {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üìä Decision-Making Quiz Platform</h1>
            <p class="subtitle">Test your knowledge on Project Cycle Management, Stakeholder Analysis & Decision-Making</p>
        </header>

        <div class="controls">
            <button class="btn-primary" onclick="startQuiz()">Start Quiz</button>
            <button class="btn-secondary" onclick="showRedoQuestions()">Redo Questions</button>
            <button class="btn-secondary" onclick="toggleFilters()">Filter Questions</button>
            <button class="btn-secondary" onclick="resetProgress()">Reset All</button>
        </div>

        <div id="filterSection" class="filter-section" style="display: none;">
            <label class="filter-label">Topics:</label>
            <div class="checkbox-group">
                <div class="checkbox-item">
                    <input type="checkbox" id="filter-pcm" checked>
                    <label for="filter-pcm">Project Cycle Management</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="filter-stakeholders" checked>
                    <label for="filter-stakeholders">Stakeholders Analysis</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="filter-mcda" checked>
                    <label for="filter-mcda">MCDA & Evaluation</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="filter-swot" checked>
                    <label for="filter-swot">SWOT Analysis</label>
                </div>
            </div>
        </div>

        <div class="stats" id="statsSection" style="display: none;">
            <div class="stat-box">
                <div class="stat-value" id="statCorrect">0</div>
                <div class="stat-label">Correct</div>
            </div>
            <div class="stat-box">
                <div class="stat-value" id="statTotal">0</div>
                <div class="stat-label">Total</div>
            </div>
            <div class="stat-box">
                <div class="stat-value" id="statPercentage">0%</div>
                <div class="stat-label">Score</div>
            </div>
        </div>

        <div id="progressContainer" style="display: none;">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
        </div>

        <div id="mainContent">
            <div class="empty-state">
                <div class="empty-state-icon">üìö</div>
                <p>Click "Start Quiz" to begin testing your knowledge!</p>
            </div>
        </div>

        <div id="redoModal" class="modal">
            <div class="modal-content">
                <div class="modal-title">Questions to Redo</div>
                <div id="redoContent"></div>
                <button class="btn-primary" style="width: 100%; margin-top: 20px;" onclick="closeRedoModal()">Close</button>
            </div>
        </div>
    </div>

    <script>
        const quizzes = [
            { id: 1, topic: "pcm", question: "In the context of Project Cycle Management, which analytical relationship distinguishes the Appraisal phase from Design?", options: ["Design precedes Appraisal and builds feasibility arguments", "Appraisal validates Design and assesses implementation viability", "Design and Appraisal are conducted simultaneously", "Appraisal only evaluates financial feasibility"], correct: 1, explanation: "Appraisal critically examines the design's viability, testing whether proposed activities can realistically achieve stated objectives." },
            { id: 2, topic: "pcm", question: "How does the concept of 'assumptions' in the Logical Framework fundamentally differ from 'risks' in project documentation?", options: ["Assumptions are negative; risks are positive", "Assumptions are external conditions outside project control; risks are typically within project management scope", "Both are identical", "Assumptions relate only to budget"], correct: 1, explanation: "Assumptions represent critical external conditions that MUST hold true for project success; if they fail, the project fails despite perfect implementation." },
            { id: 3, topic: "stakeholders", question: "What is the primary analytical distinction between a 'means-end' relationship in the Objective Tree versus a simple sequential activity list?", options: ["Means-end shows causal logic of how activities produce results", "Sequential lists only show timing", "Both produce identical outcomes", "Means-end relationships don't exist"], correct: 0, explanation: "Means-end relationships establish IF-THEN causal logic: if these activities occur, THEN these outputs result, THEN outcomes emerge." },
            { id: 4, topic: "stakeholders", question: "In Power-Interest Matrix positioning, which stakeholder quadrant requires 'Keep Satisfied' strategy rather than direct engagement?", options: ["High Power, High Interest", "High Power, Low Interest", "Low Power, High Interest", "Low Power, Low Interest"], correct: 1, explanation: "High Power, Low Interest stakeholders ('Context Setters') can veto decisions but lack direct motivation; minimal engagement keeps them satisfied." },
            { id: 5, topic: "mcda", question: "In structuring MCDA problems, why does establishing clear 'decision context' precede criteria identification?", options: ["Context doesn't affect criteria", "Context clarifies decision scope, stakeholders, and constraints enabling appropriate criteria", "Criteria are context-independent", "Order doesn't matter"], correct: 1, explanation: "Decision context determines who decides, what's at stake, and what constraints apply‚Äîall shaping which criteria are relevant." },
            { id: 6, topic: "swot", question: "What analytical significance does identifying 'compensatory relationships' between organizational strengths and weaknesses have in SWOT?", options: ["No significance; they're independent", "Certain strengths can strategically offset specific weaknesses", "Strengths and weaknesses cannot interact", "Compensation doesn't exist"], correct: 1, explanation: "A strength in brand reputation (weakness: limited R&D) might offset investment disadvantage through trust-based partnerships." },
            { id: 7, topic: "pcm", question: "In developing a Work Breakdown Structure, which principle ensures comprehensive project scope coverage without overlapping accountability?", options: ["Random listing of activities", "Hierarchical decomposition with clear levels", "Including only high-level activities", "Excluding implementation details"], correct: 1, explanation: "WBS hierarchical decomposition ensures every deliverable is accounted for exactly once, at appropriate specificity levels." },
            { id: 8, topic: "stakeholders", question: "How do 'first-level' stakeholders with high interest but low power require fundamentally different engagement strategies?", options: ["No strategy difference exists", "High-interest groups need inclusive communication pathways despite limited power", "Interest level doesn't matter", "Strategy is uniform across all groups"], correct: 1, explanation: "Subjects (high interest, low power) must have their voices heard through inclusive processes even if they cannot directly influence outcomes." },
            { id: 9, topic: "mcda", question: "How do 'compensatory' MCDA methods (weighted sum) differ from 'non-compensatory' methods in handling trade-offs?", options: ["No difference; both handle tradeoffs identically", "Compensatory allow high scores to offset poor performance; non-compensatory require threshold minimums", "Both eliminate tradeoffs", "Trade-offs don't exist in MCDA"], correct: 1, explanation: "Compensatory: high environmental score offsets low cost. Non-compensatory: low cost below threshold eliminates option regardless of other scores." },
            { id: 10, topic: "swot", question: "How does 'organizational culture' function strategically in SWOT analysis‚Äîas strength or weakness?", options: ["Culture doesn't matter", "Adaptable culture enables innovation (strength); rigid culture prevents change (weakness)", "Culture is neutral", "Culture only affects morale"], correct: 1, explanation: "Organizational culture directly enables or constrains adaptation; adaptive cultures turn disruptions into opportunities." },
            { id: 11, topic: "pcm", question: "In project attribution analysis, why is a 'counterfactual' scenario essential rather than simply measuring project outcomes?", options: ["Counterfactuals are too expensive", "Isolates project impact by comparing with what would occur without intervention", "Outcomes automatically prove attribution", "Counterfactuals are theoretical only"], correct: 1, explanation: "Without counterfactual, you cannot distinguish project-caused change from change that would happen anyway." },
            { id: 12, topic: "pcm", question: "How does 'sustainability' relate to identified target group characteristics in project design?", options: ["Sustainability applies equally regardless", "Target group capacity and ownership critically determine sustainability likelihood", "Sustainability is purely environmental", "These are unrelated concepts"], correct: 1, explanation: "Sustainability depends on whether target communities have capacity and incentives to maintain project benefits." },
            { id: 13, topic: "stakeholders", question: "What analytical value does Social Network Analysis (SNA) provide beyond traditional stakeholder mapping?", options: ["SNA provides no new insights", "SNA reveals informal influence networks and communication patterns", "SNA only provides names", "Networks don't affect decisions"], correct: 1, explanation: "SNA visualizes WHO influences WHOM, revealing actual power flows beyond formal organizational positions." },
            { id: 14, topic: "stakeholders", question: "How do 'vulnerable' stakeholder groups differ from 'marginalized' groups in requiring differentiated inclusion strategies?", options: ["No difference", "Vulnerable face capacity barriers; marginalized face systematic exclusion", "Both are identical", "Differentiation is unnecessary"], correct: 1, explanation: "Vulnerable need capacity support; marginalized need both capacity AND systemic inclusion of their voices." },
            { id: 15, topic: "mcda", question: "In the Analytical Hierarchy Process (AHP), what does the 'consistency ratio' measure and why is it significant?", options: ["Irrelevant metric", "Measures logical consistency of pairwise comparisons revealing respondent confusion", "Consistency ratio can't be calculated", "Consistency doesn't matter"], correct: 1, explanation: "If decisions lack internal logic (A>B, B>C but C>A), consistency ratio reveals problematic responses." },
            { id: 16, topic: "swot", question: "In complex organizations, how do 'dynamic capabilities' represent evolution beyond traditional strength/weakness identification?", options: ["Dynamic capabilities don't exist", "Organizations' learning and adaptation capacity is itself a critical competency", "Change ability isn't important", "Static analysis suffices"], correct: 1, explanation: "Organizations that learn from experience and adapt strategically have meta-strength enabling advantage across changing contexts." },
            { id: 17, topic: "pcm", question: "How does formative evaluation's role in adaptive management differ from ex-post evaluation in accountability?", options: ["Both serve identical purposes", "Formative enables mid-course corrections; ex-post documents final results for accountability", "Both are optional", "Ex-post is never used"], correct: 1, explanation: "Formative is about 'learning while doing'; ex-post is about 'proving what happened.'" },
            { id: 18, topic: "stakeholders", question: "In 'stakeholder salience' analysis, why does urgency matter alongside power and legitimacy?", options: ["Urgency is irrelevant", "Urgency adds temporal pressure requiring immediate engagement decisions", "Urgency is always low", "Only power determines strategy"], correct: 1, explanation: "A stakeholder with moderate power/legitimacy but high urgency demands immediate attention; low urgency actors can be addressed later." },
            { id: 19, topic: "mcda", question: "What role does 'normalization' (scaling criteria to 0-1 range) serve when MCDA includes heterogeneous units?", options: ["Normalization is unnecessary", "Enables comparison of incommensurable units (kg vs percentage vs years)", "Units don't need conversion", "Normalization adds error"], correct: 1, explanation: "Without normalization, a criterion in thousands would dominate one in percentages purely due to scale, not importance." },
            { id: 20, topic: "swot", question: "How do 'stakeholder perceptions' of organizational strengths differ from 'objective analysis' in SWOT implications?", options: ["No difference", "Perceived strengths affect stakeholder behavior regardless of objective reality", "Perception and reality always align", "Perception doesn't matter"], correct: 1, explanation: "If stakeholders perceive weakness despite objective strength, projects still fail due to stakeholder resistance." },
            { id: 21, topic: "pcm", question: "Why is a 'baseline assessment' foundational for measuring project impact throughout M&E activities?", options: ["Baseline is optional", "Establishes pre-project situation enabling isolating change measurement", "Only relevant for quantitative indicators", "Baseline data can be fabricated retrospectively"], correct: 1, explanation: "Baseline establishes BEFORE state; comparing AFTER to baseline reveals project-induced change." },
            { id: 22, topic: "stakeholders", question: "How does 'inclusive participation' in stakeholder engagement prevent 'elite capture' of decision-making?", options: ["Participation doesn't prevent capture", "Intentional inclusion of marginalized voices and removal of participation barriers", "Elite naturally dominates", "Inclusion creates inefficiency"], correct: 1, explanation: "Elite capture occurs when participation processes are hijacked by powerful actors; inclusion strategies counter this." },
            { id: 23, topic: "mcda", question: "How does sensitivity analysis in MCDA determine decision robustness versus revealing instability?", options: ["Sensitivity serves no purpose", "Tests whether parameter changes alter optimal choice; robust if stable; unstable if changes recommend different option", "Sensitivity is decorative", "Robustness doesn't matter"], correct: 1, explanation: "If decision changes from A‚ÜíB with minor weight adjustments, consensus/confidence is low." },
            { id: 24, topic: "swot", question: "In SWOT for social enterprises, what competitive positioning emerges from combining 'social mission' and 'financial sustainability' strengths?", options: ["Social enterprises don't compete", "Mission + sustainability attracts committed stakeholders differently than commercial enterprises", "Traditional and social enterprises are identical", "Social focus is competitive weakness"], correct: 1, explanation: "Stakeholders value mission-driven organizations' authenticity, creating loyalty traditional competitors struggle to match." },
            { id: 25, topic: "pcm", question: "How does 'gender-sensitive' project design differ in stakeholder identification compared to standard approaches?", options: ["Gender is irrelevant", "Gender affects access to resources, decision-making, and benefit distribution differently", "Only women require gender sensitivity", "Gender analysis overcomplicates"], correct: 1, explanation: "Men and women within same communities often have different interests, needs, and stakes in projects." },
            { id: 26, topic: "stakeholders", question: "How does 'stakeholder accountability' (two-way transparency) differ from organizational accountability (upward reporting)?", options: ["No difference", "Stakeholder accountability means org transparently reports TO stakeholders; stakeholders also report back", "Accountability is unidirectional", "Stakeholders have no accountability"], correct: 1, explanation: "Genuine accountability means both parties have obligations: org to report, stakeholders to provide feedback informing decisions." },
            { id: 27, topic: "mcda", question: "In multi-stakeholder MCDA, why does stakeholder disagreement about criterion weights complicate aggregation?", options: ["No complication; consensus is universal", "Different values mean weights differ; forcing consensus misrepresents dissent", "All stakeholders prioritize identically", "Disagreement is irrelevant"], correct: 1, explanation: "Averaging weights from stakeholders with fundamentally different values creates a compromise option nobody truly wants." },
            { id: 28, topic: "swot", question: "How does the SWOT combination 'S+T' (strengths meeting threats) suggest different strategic response than 'W+T'?", options: ["No strategic difference", "S+T leverage strengths to defend against threats; W+T forces retrenchment or transformative change", "All combinations require identical strategy", "Strategy doesn't depend on combinations"], correct: 1, explanation: "Strong organization facing threat = defensive strategy. Weak organization = may need to exit market or fundamentally change." },
            { id: 29, topic: "pcm", question: "In project monitoring, why do 'real-time data collection' enable adaptive management differently than periodic evaluation?", options: ["Periodic is always better", "Real-time enables course corrections during implementation; periodic only documents results", "Both are equally responsive", "Timing doesn't affect adaptability"], correct: 1, explanation: "By the time periodic report identifies problems, implementation has proceeded; real-time catches issues early." },
            { id: 30, topic: "stakeholders", question: "What distinguishes 'claimed interests' (stated priorities) from 'revealed preferences' (demonstrated through behavior)?", options: ["No distinction", "Behavior reveals true priorities more than statements; may diverge dramatically", "Statements and behavior align perfectly", "Neither matters; preferences are fixed"], correct: 1, explanation: "Stakeholders may claim poverty alleviation priority but invest resources in activities benefiting themselves." },
            { id: 31, topic: "mcda", question: "What does ELECTRE's 'outranking' logic reveal about alternatives that weighted-sum scoring cannot?", options: ["No difference", "Outranking identifies alternatives dominating on majority criteria without requiring perfect scores", "Scoring and outranking are identical", "Logic differences don't matter"], correct: 1, explanation: "Option A might 'outrank' B by being better on 3 of 4 criteria even if B excels on the 4th." },
            { id: 32, topic: "swot", question: "How do 'first-mover advantage' and 'late-mover disadvantage' manifest differently in SWOT competitive threat analysis?", options: ["No difference", "First-movers capture market share creating competitive threats; late-movers face entrenched competitors", "All entrants face identical competition", "Timing doesn't affect competition"], correct: 1, explanation: "First-mover advantage (competitor opportunity) becomes threat if YOUR organization is late-mover entering established market." },
            { id: 33, topic: "pcm", question: "In developing LogFrames, why do 'means of verification' specifications reduce evaluation uncertainty?", options: ["They don't reduce uncertainty", "Pre-specifying data sources and methods ensures comparable, reliable measurement", "Verification occurs only at project end", "Specification doesn't affect quality"], correct: 1, explanation: "Vague verification ('stakeholder satisfaction measured quarterly') creates inconsistency; specific ('FGD with 20 randomly selected women') enables rigor." },
            { id: 34, topic: "stakeholders", question: "In 'power-interest' stakeholder analysis, what strategic insight does distinguishing 'supporters', 'neutrals', and 'opponents' provide?", options: ["No strategic difference", "Different groups require differentiated engagement: supporters need cultivation; neutrals need persuasion; opponents need management", "All require identical engagement", "Classification is unnecessary"], correct: 1, explanation: "Treating supporter and opponent identically wastes resources and misses opportunity to shift neutral actors." },
            { id: 35, topic: "mcda", question: "In group MCDA decision-making, why does 'stakeholder preference elicitation' require methods beyond simple voting?", options: ["Voting is sufficient", "Different stakeholders need different elicitation methods (surveys vs interviews vs rankings); simple voting ignores intensity/reasoning", "All stakeholders express preferences identically", "Method doesn't affect results"], correct: 1, explanation: "Voting treats 51% majority the same as 99% consensus; weighted preferences reveal true support intensity." },
            { id: 36, topic: "swot", question: "How does 'resource-based view' in SWOT imply different competitive advantage sustainability than position-based view?", options: ["No difference", "Rare, valuable, difficult-to-imitate resources create sustainable advantage; positions erode as competitors copy", "Resource advantages are temporary", "Sustainability is unrelated"], correct: 1, explanation: "Patent-protected technology (resource) creates advantage longer than market position alone." },
            { id: 37, topic: "pcm", question: "In project attribution, why does 'comparison group' methodology provide stronger evidence than simple before-after comparison?", options: ["Comparison groups add no value", "Comparison isolates project impact by accounting for changes occurring anyway; before-after confuses external changes with project results", "Before-after is equally rigorous", "Comparisons are unnecessary"], correct: 1, explanation: "If development occurred everywhere (not just project areas), before-after would wrongly attribute external change to project." },
            { id: 38, topic: "stakeholders", question: "In stakeholder engagement, what does 'subsidiarity' principle suggest about appropriate decision-making levels?", options: ["Centralization is optimal", "Decisions should be made at most local/affected stakeholder level possible", "All decisions require national authority", "Level of decision doesn't matter"], correct: 1, explanation: "School discipline decisions should involve school community, not national ministry; national policy decisions require central authority." },
            { id: 39, topic: "mcda", question: "How does 'criteria dialogue' with stakeholders before weighting ensure MCDA legitimacy differently than expert-defined criteria?", options: ["Dialogue serves no purpose", "Stakeholder agreement on what criteria matter creates ownership; expert criteria risk measuring wrong values", "Stakeholder input contradicts analysis", "Legitimacy is independent of criteria source"], correct: 1, explanation: "If experts define 'success' as cost-efficiency but beneficiaries value equity, measurements miss what matters to stakeholders." },
            { id: 40, topic: "swot", question: "In SWOT scenario analysis, what strategic insight emerges from 'W+O' (weaknesses + opportunities) combination?", options: ["No insight; weakness blocks opportunity", "Weaknesses present barriers to capturing opportunities; strategies must build capacity or seek partnerships", "Opportunities overcome all weaknesses", "Weakness-opportunity combinations don't occur"], correct: 1, explanation: "Organization sees market opportunity but lacks technical capacity; might hire consultants, partner, or outsource." },
            { id: 11, topic: "pcm", question: "What is the Logical Framework (LogFrame) used for?", options: ["To allocate project funds", "To structure project information including objectives, indicators, and assumptions", "To schedule timeline only", "To determine project location"], correct: 1, explanation: "The LogFrame is a management tool that structures project information into a coherent narrative." },
            { id: 12, topic: "pcm", question: "What is the purpose of a Problem Tree in project identification?", options: ["To list all possible solutions", "To identify the core problem and establish cause-effect relationships", "To determine the budget", "To assign team responsibilities"], correct: 1, explanation: "A Problem Tree helps visualize cause-effect relationships and identify root causes." },
            { id: 13, topic: "pcm", question: "What is the Objective Tree used for?", options: ["To allocate project budget", "To describe future situation and identify means-end relationships", "To schedule activities", "To identify risks"], correct: 1, explanation: "The Objective Tree transforms problems into positive, achievable objectives." },
            { id: 14, topic: "pcm", question: "What is a results-based approach in project management?", options: ["Only focusing on costs", "Seeking clearly defined objectives and outcomes with coordinated activities", "Ignoring intermediate outcomes", "Measuring only financial results"], correct: 1, explanation: "Results-based approach seeks clearly defined objectives with coordinated activities." },
            { id: 15, topic: "pcm", question: "What is 'outputs' versus 'outcomes'?", options: ["Same thing", "Outputs are direct products; outcomes are broader changes", "Outcomes are not important", "No distinction exists"], correct: 1, explanation: "Outputs are immediate deliverables; outcomes are changes resulting from using outputs." },
            { id: 16, topic: "pcm", question: "What is a project indicator?", options: ["Not necessary", "Measurable variable showing progress toward objectives", "Only financial", "Only at project end"], correct: 1, explanation: "Indicators are specific, measurable statements tracking progress toward objectives." },
            { id: 17, topic: "pcm", question: "What is project sustainability?", options: ["Only environmental concern", "Outcomes and benefits continue after external support ends", "Not relevant", "Too expensive"], correct: 1, explanation: "Sustainability means project benefits persist beyond implementation phase." },
            { id: 18, topic: "pcm", question: "What is the difference between formative and ex-post evaluation?", options: ["Same thing", "Formative is during implementation; ex-post is after completion", "Only ex-post matters", "Formative is unnecessary"], correct: 1, explanation: "Formative evaluation occurs during implementation; ex-post after project ends." },
            { id: 19, topic: "pcm", question: "What is attribution in project evaluation?", options: ["Not necessary", "Establishing causal links between project activities and outcomes", "Optional", "Guessing results"], correct: 1, explanation: "Attribution answers whether project caused observed changes." },
            { id: 20, topic: "pcm", question: "What is counterfactual analysis?", options: ["Too complex", "Comparison with similar non-beneficiaries to isolate impact", "Not scientific", "Not useful"], correct: 1, explanation: "Counterfactual analysis compares beneficiaries with control groups." },
            { id: 21, topic: "stakeholders", question: "What are the five main categories of stakeholders?", options: ["Managers only", "Political actors, bureaucratic actors, special interests, general interests, and experts", "Rich and poor only", "Young and old only"], correct: 1, explanation: "The five categories represent different stakeholder bases and interests." },
            { id: 22, topic: "stakeholders", question: "What are the four types of resources stakeholders can mobilize?", options: ["Only financial", "Political, economic, legal, and cognitive resources", "Land and labor only", "Public and private only"], correct: 1, explanation: "Stakeholders can mobilize four types of resources in projects." },
            { id: 23, topic: "stakeholders", question: "What determines stakeholder legitimacy?", options: ["Only government actors", "Just interest in system, right to impose requirements, or willingness to participate", "Only wealthy actors", "Not determinable"], correct: 1, explanation: "Legitimacy is based on interest, rights, and willingness to participate." },
            { id: 24, topic: "stakeholders", question: "What is stakeholder salience?", options: ["Not relevant", "Combination of power, legitimacy, and urgency", "Only visibility", "Cannot be measured"], correct: 1, explanation: "Stakeholder salience combines power, legitimacy, and urgency attributes." },
            { id: 25, topic: "stakeholders", question: "What is inclusive participation?", options: ["Powerful groups only", "Ensuring marginalized stakeholders have meaningful voice", "Only for social projects", "Cannot be achieved"], correct: 1, explanation: "Inclusive participation ensures diverse stakeholders have meaningful voice." },
            { id: 26, topic: "stakeholders", question: "What is stakeholder capacity building?", options: ["Not important", "Developing stakeholders' knowledge, skills, and resources", "Unnecessary cost", "Only for large organizations"], correct: 1, explanation: "Capacity building ensures stakeholders can effectively participate." },
            { id: 27, topic: "stakeholders", question: "What is stakeholder accountability?", options: ["Not necessary", "Project's responsibility to transparently report on commitments and results", "Only to funding agencies", "Cannot be measured"], correct: 1, explanation: "Accountability establishes project credibility and trust." },
            { id: 28, topic: "stakeholders", question: "How do stakeholder expectations differ from needs?", options: ["Same thing", "Needs are requirements; expectations may be aspirational", "Only needs matter", "Expectations not important"], correct: 1, explanation: "Needs reflect requirements; expectations may be hopes or desires." },
            { id: 29, topic: "stakeholders", question: "What is conflict mapping in stakeholder analysis?", options: ["Military strategy", "Identifying agreement and disagreement between stakeholder groups", "Not useful", "Too complicated"], correct: 1, explanation: "Conflict mapping visualizes stakeholder positions to anticipate collaboration or conflict." },
            { id: 30, topic: "stakeholders", question: "How should vulnerable stakeholders be handled?", options: ["Exclude them", "Identify and ensure equitable participation and benefits", "Not possible", "Too time-consuming"], correct: 1, explanation: "Vulnerable stakeholders need special attention for equitable participation." },
            { id: 31, topic: "mcda", question: "What is Multi-Criteria Decision Analysis (MCDA)?", options: ["Single criterion analysis", "Allows consideration of multiple objectives and heterogeneous measures", "Guarantees best solution", "Only for financial decisions"], correct: 1, explanation: "MCDA allows simultaneous consideration of multiple criteria." },
            { id: 32, topic: "mcda", question: "What are the main steps of the MCDA process?", options: ["Only identify options", "Establish context, identify options, identify criteria, describe performance, weight criteria, aggregate scores, examine results, sensitivity analysis", "Just surveys", "Skip criteria selection"], correct: 1, explanation: "MCDA has 8 key steps from establishing context to sensitivity analysis." },
            { id: 33, topic: "mcda", question: "What is a performance matrix in MCDA?", options: ["Not necessary", "Table showing how each alternative performs on each criterion", "Only financial analysis", "Optional tool"], correct: 1, explanation: "Performance matrix is central to MCDA comparing alternatives and criteria." },
            { id: 34, topic: "mcda", question: "What is weighting in MCDA?", options: ["Not necessary", "Assigning importance values to criteria reflecting preferences", "All equal", "Optional step"], correct: 1, explanation: "Weights quantify relative importance of criteria in decision-making." },
            { id: 35, topic: "mcda", question: "What is normalization in MCDA?", options: ["Making everything normal", "Converting performance data into comparable scales", "Not necessary", "Only for quantitative"], correct: 1, explanation: "Normalization standardizes criteria into dimensionless values for comparison." },
            { id: 36, topic: "mcda", question: "What is a trade-off in decision-making?", options: ["Not relevant", "Accepting lower performance on one criterion for better performance on another", "Impossible", "Only cost-benefit"], correct: 1, explanation: "Trade-offs reflect compromise between competing criteria." },
            { id: 37, topic: "mcda", question: "What is pairwise comparison in MCDA?", options: ["Comparing all together", "Comparing two alternatives at a time to determine preference", "Not useful", "Only qualitative"], correct: 1, explanation: "Pairwise comparison simplifies decision-making by focusing on two items." },
            { id: 38, topic: "mcda", question: "What is the Analytical Hierarchy Process (AHP)?", options: ["Only hierarchies", "Decomposes decision into hierarchy, evaluates through pairwise comparisons", "Cannot use stakeholders", "Too simple"], correct: 1, explanation: "AHP breaks decision into hierarchy evaluated through pairwise comparisons." },
            { id: 39, topic: "mcda", question: "What is sensitivity analysis in MCDA?", options: ["To complicate", "To test how results change with different weights or preferences", "Not necessary", "Confirm one answer"], correct: 1, explanation: "Sensitivity analysis examines robustness of results to parameter changes." },
            { id: 40, topic: "mcda", question: "What is the Delphi Method?", options: ["Financial decisions only", "Achieves convergence of opinions for decision-making", "Replaces judgment", "Eliminates conflict"], correct: 1, explanation: "Delphi achieves consensus and extracts useful information for decisions." },
            { id: 41, topic: "swot", question: "How are internal and external factors organized in SWOT?", options: ["All treated equally", "Internal (Strengths/Weaknesses) vs External (Opportunities/Threats)", "Only external matters", "Alphabetically"], correct: 1, explanation: "SWOT matrix distinguishes internal from external and positive from negative." },
            { id: 42, topic: "swot", question: "What is the main purpose of SWOT analysis?", options: ["To criticize", "To provide comprehensive understanding of strategy factors", "Eliminate weaknesses", "Make complex"], correct: 1, explanation: "SWOT helps decision-makers understand factors affecting strategy." },
            { id: 43, topic: "swot", question: "What is a weakness in SWOT analysis?", options: ["To criticize", "Internal attributes harmful to achievement of objectives", "Not constructive", "Ignore them"], correct: 1, explanation: "Weaknesses identify improvement areas and resource gaps." },
            { id: 44, topic: "swot", question: "Which SWOT quadrant represents future potential challenges?", options: ["Strengths", "Weaknesses", "Opportunities", "Threats"], correct: 3, explanation: "Threats are external risks and potential obstacles." },
            { id: 45, topic: "swot", question: "How can opportunities be identified?", options: ["Guessing", "Market research, trend analysis, stakeholder interviews", "Only experts", "Random"], correct: 1, explanation: "Opportunities emerge from systematic external analysis and research." },
            { id: 46, topic: "swot", question: "What is a strategic option in SWOT?", options: ["No relationship", "How SWOT factors combine: S+O=Growth, S+T=Stability, W+O=Diversification, W+T=Retrenchment", "All strategies same", "Independent"], correct: 1, explanation: "SWOT combinations guide strategy formulation with different options." },
            { id: 47, topic: "swot", question: "How should SWOT analysis be conducted?", options: ["By one person", "Participatory workshop with stakeholders and experts", "In isolation", "Without discussion"], correct: 1, explanation: "SWOT is most effective as participatory analysis with diverse perspectives." },
            { id: 48, topic: "swot", question: "What does resource analysis include in SWOT?", options: ["Only financial", "Assessment of human, financial, technological, informational resources", "No analysis needed", "External only"], correct: 1, explanation: "Resource analysis assesses organizational capabilities and strengths." },
            { id: 49, topic: "swot", question: "When should SWOT analysis be updated?", options: ["Once never again", "Regularly as conditions change", "Never update", "Only crisis"], correct: 1, explanation: "SWOT is dynamic and should be updated as circumstances change." },
            { id: 50, topic: "swot", question: "What is a scenario based on SWOT?", options: ["Not useful", "Plausible future combining different SWOT factors", "Only past", "Just predictions"], correct: 1, explanation: "Scenarios help visualize possible futures from SWOT analysis." }
        ];

        let currentQuiz = [];
        let currentQuestionIndex = 0;
        let score = 0;
        let answeredQuestions = {};
        let redoQuestions = [];
        let quizActive = false;

        function getFilteredQuizzes() {
            const filters = {
                pcm: document.getElementById('filter-pcm').checked,
                stakeholders: document.getElementById('filter-stakeholders').checked,
                mcda: document.getElementById('filter-mcda').checked,
                swot: document.getElementById('filter-swot').checked
            };
            return quizzes.filter(q => filters[q.topic]);
        }

        function startQuiz() {
            currentQuiz = getFilteredQuizzes();
            if (currentQuiz.length === 0) {
                alert("Please select at least one topic filter.");
                return;
            }
            currentQuiz = currentQuiz.sort(() => Math.random() - 0.5);
            currentQuestionIndex = 0;
            score = 0;
            answeredQuestions = {};
            redoQuestions = [];
            quizActive = true;
            document.getElementById('statsSection').style.display = 'flex';
            document.getElementById('progressContainer').style.display = 'block';
            showQuestion();
        }

        function showQuestion() {
            if (currentQuestionIndex >= currentQuiz.length) {
                showResults();
                return;
            }
            const q = currentQuiz[currentQuestionIndex];
            const progress = ((currentQuestionIndex + 1) / currentQuiz.length) * 100;
            document.getElementById('progressFill').style.width = progress + '%';

            let html = `
                <div class="quiz-container">
                    <div class="question-number">Question ${currentQuestionIndex + 1} of ${currentQuiz.length}</div>
                    <div class="question-text">${q.question}</div>
                    <div class="options">
                        ${q.options.map((option, idx) => `
                            <div class="option ${answeredQuestions[q.id] === idx ? 'selected' : ''}" 
                                 onclick="selectOption(${idx}, ${q.id})"
                                 ${answeredQuestions[q.id] !== undefined ? 'style="pointer-events: none;"' : ''}>
                                ${option}
                            </div>
                        `).join('')}
                    </div>
                    ${answeredQuestions[q.id] !== undefined ? `
                        <div class="feedback show ${answeredQuestions[q.id] === q.correct ? 'correct' : 'incorrect'}">
                            <strong>${answeredQuestions[q.id] === q.correct ? '‚úì Correct!' : '‚úó Incorrect'}</strong>
                            <div class="explanation">${q.explanation}</div>
                        </div>
                    ` : ''}
                    <div class="btn-group">
                        <button class="btn-secondary" onclick="previousQuestion()" ${currentQuestionIndex === 0 ? 'disabled' : ''}>‚Üê Previous</button>
                        <button class="btn-primary" onclick="nextQuestion()" style="flex: 2;">${currentQuestionIndex === currentQuiz.length - 1 ? 'Finish' : 'Next'} ‚Üí</button>
                    </div>
                </div>
            `;
            document.getElementById('mainContent').innerHTML = html;
            updateStats();
        }

        function selectOption(idx, qId) {
            answeredQuestions[qId] = idx;
            const q = currentQuiz.find(x => x.id === qId);
            if (idx === q.correct) {
                score++;
            } else {
                redoQuestions.push(qId);
            }
            showQuestion();
        }

        function nextQuestion() {
            if (currentQuestionIndex < currentQuiz.length - 1) {
                currentQuestionIndex++;
                showQuestion();
            } else {
                showResults();
            }
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                showQuestion();
            }
        }

        function updateStats() {
            const answered = Object.keys(answeredQuestions).length;
            const percentage = answered > 0 ? Math.round((score / answered) * 100) : 0;
            document.getElementById('statCorrect').textContent = score;
            document.getElementById('statTotal').textContent = answered;
            document.getElementById('statPercentage').textContent = percentage + '%';
        }

        function showResults() {
            quizActive = false;
            const answered = Object.keys(answeredQuestions).length;
            const percentage = Math.round((score / answered) * 100);
            
            let html = `
                <div class="quiz-container">
                    <h2 style="text-align: center; color: var(--color-primary); margin-bottom: 20px;">Quiz Complete! üéâ</h2>
                    <div class="stats">
                        <div class="stat-box">
                            <div class="stat-value">${score}</div>
                            <div class="stat-label">Correct</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value">${answered - score}</div>
                            <div class="stat-label">Incorrect</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value">${percentage}%</div>
                            <div class="stat-label">Score</div>
                        </div>
                    </div>
                    <div class="btn-group" style="margin-top: 20px;">
                        <button class="btn-primary" onclick="startQuiz()">Retake Quiz</button>
                        <button class="btn-secondary" onclick="showRedoQuestions()">Review Mistakes</button>
                    </div>
                    ${redoQuestions.length > 0 ? `
                        <div class="redo-section">
                            <div class="redo-title">üìö Questions to Review:</div>
                            <ul class="redo-list">
                                ${redoQuestions.map(qId => {
                                    const q = quizzes.find(x => x.id === qId);
                                    return `<li class="redo-item">${q.question}</li>`;
                                }).join('')}
                            </ul>
                        </div>
                    ` : ''}
                </div>
            `;
            document.getElementById('mainContent').innerHTML = html;
        }

        function showRedoQuestions() {
            if (redoQuestions.length === 0) {
                alert("No questions to redo. Start a quiz first!");
                return;
            }
            let html = '';
            redoQuestions.forEach(qId => {
                const q = quizzes.find(x => x.id === qId);
                html += `
                    <div style="background-color: var(--color-background); padding: 15px; margin-bottom: 15px; border-radius: 6px; border-left: 3px solid var(--color-error);">
                        <strong style="color: var(--color-text);">${q.question}</strong>
                        <div style="margin-top: 10px; font-size: 14px; color: var(--color-text-secondary);">
                            <strong>Correct Answer:</strong> ${q.options[q.correct]}
                        </div>
                        <div style="margin-top: 8px; font-size: 13px; color: var(--color-text);">
                            <strong>Explanation:</strong> ${q.explanation}
                        </div>
                    </div>
                `;
            });
            document.getElementById('redoContent').innerHTML = html;
            document.getElementById('redoModal').classList.add('show');
        }

        function closeRedoModal() {
            document.getElementById('redoModal').classList.remove('show');
        }

        function toggleFilters() {
            const filter = document.getElementById('filterSection');
            filter.style.display = filter.style.display === 'none' ? 'block' : 'none';
        }

        function resetProgress() {
            if (confirm('Are you sure you want to reset all progress?')) {
                answeredQuestions = {};
                redoQuestions = [];
                currentQuestionIndex = 0;
                score = 0;
                quizActive = false;
                document.getElementById('statsSection').style.display = 'none';
                document.getElementById('progressContainer').style.display = 'none';
                document.getElementById('mainContent').innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">üìö</div>
                        <p>Click "Start Quiz" to begin testing your knowledge!</p>
                    </div>
                `;
            }
        }

        window.onclick = function(event) {
            const modal = document.getElementById('redoModal');
            if (event.target == modal) {
                closeRedoModal();
            }
        }
    </script>
</body>
</html>
